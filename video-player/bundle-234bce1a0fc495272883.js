(()=>{"use strict";var e={131:(e,t,n)=>{n.r(t)},495:function(e,t){var n,i,o,r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.VideoPlayer=t.UiClasses=void 0,function(e){e.play="videoPlay",e.stop="videoStop",e.pause="videoPause",e.start="videoStart",e.fullscreen="videoFullscreen",e.fullscreenCancel="videoFullscreenCancel",e.buffer="playerBufferedAmount",e.progress="playerProgressAmount",e.track="playerTrack",e.volume="videoVolume",e.rangeVolume="videoVolumeRange",e.labelValue="palyer-volume-label",e.volumeProgressContainer="palyerVolumeContainer",e.videoPlayerControls="videoPlayerControls",e.videoContainerOverlay="overlayVideoContainer",e.videoOverlayBtn="overlayVideoBtn",e.trackTime="palyertrackTime",e.trackTimeFull="palyertrackTimeFull",e.subtitleBtn="palyerSubtitleBtn",e.subtitleItem="palyerSubtitleItem",e.subtitleList="palyersubtitleList",e.video="playerVideo"}(n=t.UiClasses||(t.UiClasses={})),function(e){e[e.fullscreen=30]="fullscreen",e[e.controls=25]="controls",e[e.volume=20]="volume",e[e.subtitle=60]="subtitle"}(i||(i={})),function(e){e.moz="Mozilla Firefox",e.opera="Opera",e.ie="Microsoft Internet Explorer",e.edge="Microsoft Edge",e.google="Google Chrome or Chromium",e.safari="Apple Safari",e.unknown="unknown"}(o||(o={}));var s=function(){function e(e,t){var n=this;this.unMount=function(){n.controls(n.container,!0),n.overlayPlay(!0)},this.fullscreen=function(e,t){return'\n        <div class="player-btn-pp">\n            <button class="'+e+' contarols-btn">\n              <img src="'+n.icons+'/fullscreen.svg" alt="fullscreen on">\n            </button>\n            <button class="'+t+' contarols-btn" style="display: none;">\n              <img src="'+n.icons+'/fullscreen-off.svg" alt="fullscreen off">\n            </button>\n          </div>\n    '},this.createUI=function(){return{controls:n.controls(n.container),overlayPLay:n.overlayPlay()}},this.container=e,this.volumeValue=t.volumeValue,this.icons=t.icons,this.subtitlesList=t.subtitles||null,this.controls=this.controls.bind(this),this.volume=this.volume.bind(this),this.overlayPlay=this.overlayPlay.bind(this),this.subtitles=this.subtitles.bind(this),this.subtitlesInit=t.subtitlesInit}return e.prototype.subtitles=function(e){var t,n=e.btn,i=e.cItem,o=e.listTrack,r=e.track;return this.subtitlesInit?'\n    <div class="player-btn-pp palyer-subtitle-container">\n      <div class="subtitle-list '+o+'" style="display: none">\n        '+(t="",r&&(r.forEach((function(e){t+='\n            <div class="'+i+' subtitle-item" data-lang="'+e.lang+'">\n              '+e.label+"\n            </div>\n          "})),t+='\n          <div class="'+i+' subtitle-item active" data-lang="off">\n            Выкл.\n          </div>'),t+'\n      </div>\n      <button class="')+n+' btn-cc contarols-btn">CC</button>\n    </div>\n    ':""},e.prototype.volume=function(e){var t=e.btn,n=e.volume;return'\n      <div class="player-btn-pp palyer-volume-container">\n\n        <div class="palyer-volume-range-wrap '+e.range+'" style="display: none;">\n          <input type="range" class="input-player-range '+n+'" value="'+this.volumeValue+'" name="volume" min="0" max="100">\n          <div class="palyer-volume-label">\n            '+this.volumeValue+'%\n          </div>\n        </div>\n       \n        <button class="'+t+' contarols-btn">\n           <img src="'+this.icons+'/volume.svg" alt="volume"> \n        </button>\n      </div>\n    '},e.prototype.play=function(e,t){return'\n      <div class="player-btn-pp">\n        <button class="'+e+' contarols-btn">\n          <img src="'+this.icons+'/play.svg" alt="play">\n        </button>\n        <button class="'+t+' contarols-btn" style="display: none;">\n          <img src="'+this.icons+'/pause.svg" alt="pause">\n        </button>\n      </div>\n    '},e.prototype.track=function(e,t,n,i,o){return'\n        <div class="player-track-container">\n          <div class="player-track-time">\n            <span class="'+i+'">00.00</span>\n            <span class="player-track-time_sp">/</span>\n            <span class="'+o+'">00.00</span>\n          </div>\n          <div class="player-track '+e+'" >\n          </div>\n          <div class="player-buffered">\n            <span class="player-buffered-amount '+n+'"></span>\n          </div>\n          <div class="player-progress">\n            <span class="player-progress-amount '+t+'"></span>\n          </div>\n        </div>\n      '},e.prototype.overlayPlay=function(e){var t,i="overlay-play",o={container:n.videoContainerOverlay,btn:n.videoOverlayBtn};if(!e&&this.container){var r='\n        <div class="overlay-play '+o.container+'">\n            <div class="play-icon '+o.btn+'"></div>\n        </div>\n      ';return this.container.insertAdjacentHTML("beforeend",r),{status:"insert",class:i,ui:Object.values(o)}}var s=null===(t=this.container)||void 0===t?void 0:t.querySelector("."+i);return null==s||s.remove(),{status:"remove",class:i,ui:[]}},e.prototype.controls=function(e,t){var i,o="videoPlayerControls",r={play:n.play,pause:n.pause,fullscreen:n.fullscreen,fullscreenCancel:n.fullscreenCancel,buffer:n.buffer,progress:n.progress,track:n.track,volume:n.volume,rangeVolume:n.rangeVolume,rangeVolumeContainer:n.volumeProgressContainer,videoPlayerControls:n.videoPlayerControls,trackTime:n.trackTime,timeFull:n.trackTimeFull,subtitleItem:n.subtitleItem,cc:n.subtitleBtn};if(t){var s=null===(i=this.container)||void 0===i?void 0:i.querySelector("."+o);return null==s||s.remove(),{status:"remove",class:o,ui:[]}}var l='\n      <div class="video-player-controls '+o+'" style="display: none">\n        <div class="player-btn-left">\n          '+this.play(r.play,r.pause)+"\n        </div>\n\n        "+this.track(r.track,r.progress,r.buffer,r.trackTime,r.timeFull)+'\n\n        <div class="player-btn-right">\n          '+this.subtitles({btn:r.cc,cItem:r.subtitleItem,listTrack:n.subtitleList,track:this.subtitlesList})+"\n          "+this.fullscreen(r.fullscreen,r.fullscreenCancel)+"\n          "+this.volume({btn:r.volume,volume:r.rangeVolume,range:r.rangeVolumeContainer})+"\n        </div>\n      </div>\n    ";return null==e||e.insertAdjacentHTML("beforeend",l),{status:"insert",class:o,ui:Object.values(r)}},e}(),l=function(){function e(e){var t,i,l,a=this,u=e.videoContainer,c=e.iconsFolder,d=e.volumeValue,v=e.subtitle,f=e.timeTrackOffest;if(this.isPlay=!1,this.isFullScreen=!1,this.isVolume=!1,this.navigator=window.navigator,this.subtitlesIndex=-1,this.isSubtitles=!1,this.isTrack=!1,this.mX=0,this.mY=0,this.unMount=function(){var e;null===(e=a.ui)||void 0===e||e.unMount(),a._onClickControls(!0)(),a._onChangeFullScreen(!0)(),a._onChangeProgessVideo(!0)(),a._onChangeVolume(!0)(),a._onEventKeywords(!0)()},this.userAgent=function(){var e=o.unknown,t="br-unknown",n=a.navigator.userAgent;return n.indexOf("Firefox")>-1?(e=o.moz,t="br-moz"):n.indexOf("Opera")>-1?(e=o.opera,t="br-opera"):n.indexOf("Trident")>-1?(e=o.ie,t="br-ie"):n.indexOf("Edge")>-1?(e=o.edge,t="br-edge"):n.indexOf("Chrome")>-1?(e=o.google,t="br-chrome"):n.indexOf("Safari")>-1&&(e=o.safari,t="br-safari"),{browser:e,class:t}},this.checkSelectors=function(){return a.video?!a.videoContainer&&(console.error("video container selector not found",a.videoContainer),!0):(console.error("video selctor not found",a.video),!0)},this.playerInit=function(){!a.checkSelectors()&&a.video&&(a._onClickControls(),a._onChangePip(),a._onChangeFullScreen(),a._onChangeProgessVideo(),a._onChangeVolume(),a._onEventKeywords(),a.video.volume=a.volumeValue/100)},this.videoContainer=document.querySelector(u),this.video=(null===(t=this.videoContainer)||void 0===t?void 0:t.querySelector("video"))||null,this.volumeValue=d||100,this.iconsFolder=c,this.timeTrackOffest=f||3,this.subtitles=(null===(i=this.video)||void 0===i?void 0:i.querySelectorAll("track"))||null,this.checkSelectors(),!this.checkSelectors()&&this.videoContainer){var p=this.videoContainer;null===(l=this.video)||void 0===l||l.classList.add(n.video),this.ui=new s(p,{volumeValue:this.volumeValue,icons:this.iconsFolder,subtitles:this.subtitles,subtitlesInit:v}),p.classList.add(this.userAgent().class);var m=this.ui.createUI();Object.keys(m).forEach((function(e){m[e].ui.forEach((function(e){var t;a.controlsUI=r(r({},a.controlsUI),((t={})[e]=p.querySelector("."+e),t))}))}))}this._onClickControls=this._onClickControls.bind(this),this._onChangePip=this._onChangePip.bind(this),this._onChangeFullScreen=this._onChangeFullScreen.bind(this),this.fadeOutIN=this.fadeOutIN.bind(this),this._onChangeProgessVideo=this._onChangeProgessVideo.bind(this),this._onChangeVolume=this._onChangeVolume.bind(this),this._onEventKeywords=this._onEventKeywords.bind(this)}return Object.defineProperty(e.prototype,"videoElement",{get:function(){return this.video},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"controls",{get:function(){return this.controlsUI},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isVideoPlay",{get:function(){return this.isPlay},enumerable:!1,configurable:!0}),e.prototype.secondsToHms=function(e){e=Number(e);var t=Math.floor(e/3600),n=Math.floor(e%3600/60),i=Math.floor(e%3600%60),o=function(e){return e>9?e:"0"+e};return{h:t,m:n,s:i,time:o(n)+":"+o(i)}},e.prototype._onMouse=function(e){var t=this;void 0===e&&(e=!1);var n=function(e){t.isVideoPlay&&(t.mX=e.clientX,t.mY=e.clientY)};return this.videoContainer&&!e&&this.videoContainer.addEventListener("mousemove",n),function(){var e;null===(e=t.videoContainer)||void 0===e||e.removeEventListener("mousemove",n)}},e.prototype._onClickControls=function(e){var t,o=this;void 0===e&&(e=!1);var r=function(e){var t,r,s=e.target,l=Object.keys(o.controlsUI),a=((t={})[n.play]=function(){var e;o.isPlay=!0,o.fadeOutIN(n.pause,n.play,i.controls),null===(e=o.video)||void 0===e||e.play()},t[n.pause]=function(){var e;o.isPlay=!1,o.fadeOutIN(n.play,n.pause,i.controls),null===(e=o.video)||void 0===e||e.pause()},t[n.fullscreen]=function(){if(o.video&&o.videoContainer){o.isFullScreen=!0;var e=o.videoContainer;e.requestFullscreen?e.requestFullscreen():e.webkitRequestFullscreen?e.webkitRequestFullscreen():e.msRequestFullscreen&&e.msRequestFullscreen(),o.fadeOutIN(n.fullscreenCancel,n.fullscreen,i.fullscreen)}},t[n.fullscreenCancel]=function(){o.video&&o.videoContainer&&(o.isFullScreen=!1,document.exitFullscreen?document.exitFullscreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.msExitFullscreen&&document.msExitFullscreen(),o.fadeOutIN(n.fullscreen,n.fullscreenCancel,i.fullscreen))},t[n.volume]=function(){o.isVolume=!o.isVolume;var e=o.controlsUI[n.volumeProgressContainer];o.isVolume?e&&o.fadeIn({el:e,display:"flex",time:i.volume}):e&&o.fadeOut({el:e,time:i.volume})},t[n.track]=function(e){var t,r=null===(t=o.videoContainer)||void 0===t?void 0:t.querySelector("."+n.track),s=e.offsetX;o.video&&(o.isPlay||o.fadeOutIN(n.pause,n.play,i.controls),o.isTrack=!0,o.video.pause(),o.video.currentTime=o.video.duration*s/r.offsetWidth,o.video.play())},t[n.videoOverlayBtn]=function(){var e;null===(e=o.video)||void 0===e||e.play()},t[n.subtitleItem]=function(e){var t=e.target,r=t.dataset.lang||"off";if(o.video&&o.videoContainer){var s=o.videoContainer.querySelector("."+n.subtitleItem+".active"),l=o.video;if(null==s||s.classList.remove("active"),t.classList.add("active"),"off"===r)-1!==o.subtitlesIndex&&(o.video.textTracks[o.subtitlesIndex].mode="disabled"),o.subtitlesIndex=-1;else{-1!==o.subtitlesIndex&&(o.video.textTracks[o.subtitlesIndex].mode="disabled");var a=Object.values(l.textTracks).findIndex((function(e){return e.language===r}));l.textTracks[a].mode="showing",o.subtitlesIndex=a}var u=o.videoContainer.querySelector("."+n.subtitleList);u&&(o.isSubtitles=!1,o.fadeOut({el:u,time:i.subtitle}))}},t[n.subtitleBtn]=function(){var e,t=null===(e=o.videoContainer)||void 0===e?void 0:e.querySelector("."+n.subtitleList);o.isSubtitles=!o.isSubtitles,o.isSubtitles?o.fadeIn({el:t,time:i.subtitle}):o.fadeOut({el:t,time:i.subtitle})},t);if(s.matches("."+n.video))return null===(r=o.video)||void 0===r||r.pause(),0;for(var u=0;u<l.length;u++)if(s.matches("."+l[u])&&void 0!==a[l[u]]){var c=o.controlsUI[l[u]];return c&&a[l[u]](e,c),0}};return e||null===(t=this.videoContainer)||void 0===t||t.addEventListener("click",r,!1),function(){var e;null===(e=o.videoContainer)||void 0===e||e.removeEventListener("click",r,!1)}},e.prototype._onChangePip=function(e){var t=this;void 0===e&&(e=!1);var o=this.video,r=function(){o.pause(),t.fadeOutIN(n.play,n.pause,i.controls)},s=function(){o.pause(),t.fadeOutIN(n.play,n.pause,i.controls)};return document.pictureInPictureEnabled&&!e&&(o.addEventListener("enterpictureinpicture",r,!1),o.addEventListener("leavepictureinpicture",s,!1),this.navigator&&(this.navigator.mediaSession.setActionHandler("pause",(function(){o.pause(),t.fadeOutIN(n.play,n.pause,i.controls)})),this.navigator.mediaSession.setActionHandler("play",(function(){o.play(),t.fadeOutIN(n.pause,n.play,i.controls)})))),function(){o.removeEventListener("enterpictureinpicture",r,!1),o.removeEventListener("leavepictureinpicture",s,!1)}},e.prototype._onChangeFullScreen=function(e){var t=this;void 0===e&&(e=!1);var r=function(){t.isFullScreen?(t.isFullScreen=!1,t.fadeOutIN(n.fullscreenCancel,n.fullscreen,i.fullscreen)):(t.isFullScreen=!0,t.fadeOutIN(n.fullscreen,n.fullscreenCancel,i.fullscreen))},s=this.userAgent();if(this.video&&this.videoContainer&&!e)switch(s.browser){case o.moz:this.videoContainer.addEventListener("mozfullscreenchange",r);break;default:this.videoContainer.addEventListener("webkitfullscreenchange",r),this.videoContainer.addEventListener("fullscreenchange",r)}return function(){var e,n,i;switch(s.browser){case o.moz:null===(e=t.videoContainer)||void 0===e||e.removeEventListener("mozfullscreenchange",r);break;default:null===(n=t.videoContainer)||void 0===n||n.removeEventListener("webkitfullscreenchange",r),null===(i=t.videoContainer)||void 0===i||i.removeEventListener("fullscreenchange",r)}}},e.prototype._onChangeProgessVideo=function(e){var t=this;void 0===e&&(e=!1);var o=this.video,r=function(){t.isPlay=!1,o.pause(),o.currentTime=0,t.fadeOutIN(n.videoContainerOverlay,n.videoPlayerControls,40,{callback:function(){t.fadeOutIN(n.play,n.pause,0)},display:"flex"})},s=function(){t.isPlay=!0,t.fadeOutIN(n.pause,n.play,i.controls),t.fadeOutIN(n.videoPlayerControls,n.videoContainerOverlay,40,{display:"flex"})},l=function(){var e=o.duration;if(e>0){var i=t.controlsUI[n.progress],r=t.controlsUI[n.trackTime];i&&(i.style.width=o.currentTime/e*100+"%"),r&&(r.innerText=t.secondsToHms(o.currentTime).time)}},a=function(){var e=o.duration;if(e>0)for(var i=0;i<o.buffered.length;i++)if(o.buffered.start(o.buffered.length-1-i)<o.currentTime){var r=t.controlsUI[n.buffer];r&&(r.style.width=o.buffered.end(o.buffered.length-1-i)/e*100+"%");break}},u=function(){var e=t.controlsUI[n.trackTimeFull];e&&(e.innerText=t.secondsToHms(o.duration).time)},c=function(){t.isTrack||t.fadeOutIN(n.videoContainerOverlay,n.videoPlayerControls,40,{callback:function(){t.fadeOutIN(n.play,n.pause,0)},display:"flex"}),t.isTrack=!1};return this.video&&!e&&(o.addEventListener("progress",a,!1),o.addEventListener("timeupdate",l,!1),o.addEventListener("ended",r,!1),o.addEventListener("play",s,!1),o.addEventListener("pause",c,!1),o.addEventListener("loadedmetadata",u,!1)),function(){o.removeEventListener("ended",r,!1),o.removeEventListener("progress",a,!1),o.removeEventListener("timeupdate",l,!1),o.removeEventListener("play",s,!1),o.removeEventListener("pause",c,!1),o.addEventListener("loadedmetadata",u,!1)}},e.prototype._onEventKeywords=function(e){var t=this;void 0===e&&(e=!1);var n=function(e){if(t.video)switch(e.which){case 32:t.isPlay?(t.isPlay=!1,t.video.pause()):(t.isPlay=!0,t.video.play());break;case 37:t.isPlay&&(t.video.currentTime-=t.timeTrackOffest);break;case 39:t.isPlay&&(t.video.currentTime+=t.timeTrackOffest);break;default:return 0}};return this.video&&!e&&document.addEventListener("keyup",n),function(){document.removeEventListener("keyup",n)}},e.prototype._onChangeVolume=function(e){var t=this;void 0===e&&(e=!1);var i=this.controlsUI[n.rangeVolume],o=function(e){var i,o=null===(i=t.videoContainer)||void 0===i?void 0:i.querySelector("."+n.labelValue),r=e.target,s=t.video;o.textContent=r.value+"%",s&&(s.volume=parseInt(r.value)/100)};return!e&&this.video&&i&&i.addEventListener("input",o,!1),function(){null==i||i.removeEventListener("input",o,!1)}},e.prototype.fadeIn=function(e){var t=e.el,n=e.display,i=void 0===n?"block":n,o=e.time,r=void 0===o?10:o,s=e.callback,l=void 0===s?void 0:s;t.style.opacity="0",t.style.display=i||"block",function e(){var n=parseFloat(t.style.opacity);(n+=r/1e3)<1.01?(t.style.opacity=n.toString(),requestAnimationFrame(e)):void 0!==l&&l()}()},e.prototype.fadeOut=function(e){var t=e.el,n=e.time,i=void 0===n?10:n,o=e.callback,r=void 0===o?void 0:o;t.style.opacity="1",function e(){(t.style.opacity-=i/1e3)<0?(t.style.display="none",void 0!==r&&r()):requestAnimationFrame(e)}()},e.prototype.fadeOutIN=function(e,t,n,i){var o=this,r=this.controlsUI[t],s=this.controlsUI[e],l=null==i?void 0:i.callback;r&&this.fadeOut({el:r,time:n,callback:function(){s&&o.fadeIn({el:s,display:(null==i?void 0:i.display)||"block",time:n,callback:l})}})},e}();t.VideoPlayer=l}},t={};function n(i){var o=t[i];if(void 0!==o)return o.exports;var r=t[i]={exports:{}};return e[i].call(r.exports,r,r.exports,n),r.exports}n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n(131),new(n(495).VideoPlayer)({videoContainer:".player-conrainer",iconsFolder:"./assets/images/icons",volumeValue:50,subtitle:!0,timeTrackOffest:2}).playerInit()})();